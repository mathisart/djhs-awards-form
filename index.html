<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ç²çåå–®å¡«å ±èˆ‡æ–‡ä»¶è‡ªå‹•ç”¢å‡ºç³»çµ±</title>
  <style>
    :root {
      --border:#e5e7eb;
      --muted:#6b7280;
      --bg:#fafafa;
      --primary:#2563eb;
      --primary-600:#1d4ed8;
      --success:#16a34a;
      --danger:#dc2626;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      background:#fafafa;
      font-family: system-ui, -apple-system, "Microsoft JhengHei", Segoe UI, Roboto, Helvetica, Arial, "Noto Sans", sans-serif;
      color:#111827;
    }
    .wrap{max-width:1200px;margin:24px auto;padding:0 16px}
    h1{font-size:20px;margin:0 0 16px}
    .banner{
      display:inline-block;
      padding:8px 12px;
      border-radius:8px;
      font-weight:600;
      margin-bottom:12px;
    }
    .banner.success{ background:var(--success); color:#fff; }
    .banner.danger { background:var(--danger);  color:#fff; }

    .grid{display:grid;gap:16px}
    @media(min-width:900px){ .grid{grid-template-columns:380px 1fr;} }

    .card{
      background:#fff;border:1px solid var(--border);border-radius:12px;
      padding:16px;
      box-shadow:0 2px 6px rgba(0,0,0,.06);
    }
    .card h2{font-size:18px;margin:0 0 12px}

    .field{margin:10px 0}
    .field label{display:block;font-size:12px;color:#374151;margin:0 0 6px}
    .field input,.field textarea,.field select{
      width:100%;border:1px solid var(--border);border-radius:10px;padding:10px 12px;background:#fff;
      font-size:14px;outline:none;
    }
    .field textarea{min-height:110px;resize:vertical}

    .btn{
      display:inline-block;border:1px solid var(--border);background:#fff;border-radius:10px;
      padding:10px 14px;font-weight:600;cursor:pointer;user-select:none;
    }
    .btn.primary{ background:var(--primary); color:#fff; border-color:var(--primary); }
    .btn.primary:hover{ background:var(--primary-600); }
    .btn:disabled{opacity:.5;cursor:not-allowed}
    .btn + .btn{margin-left:10px}

    .tools{display:flex;align-items:center;gap:10px;margin:10px 0 12px}
    .tools .grow{flex:1}
    .tools input{
      width:100%;border:1px solid var(--border);border-radius:10px;padding:10px 12px;font-size:14px;
    }

    /* è¡¨æ ¼ï¼ˆåª 5 æ¬„ï¼‰ */
    .listtable{width:100%;table-layout:fixed;border-collapse:collapse;border:1px solid var(--border);border-radius:10px;overflow:hidden}
    .listtable th,.listtable td{
      border-bottom:1px solid var(--border);padding:10px;vertical-align:top;background:#fff;
    }
    .listtable thead th{background:#f9fafb;font-weight:700}
    .listtable td:nth-child(5){word-break:break-all} /* äº‹ç”±å¯èƒ½è¼ƒé•· */
    .empty{color:var(--muted);text-align:center}

    .hint{font-size:12px;color:var(--muted);margin-left:8px}

    /* Modal */
    .backdrop{
      position:fixed;inset:0;background:rgba(0,0,0,.4);
      display:none;align-items:center;justify-content:center;padding:16px;z-index:50;
    }
    .modal{
      width:min(720px, 96vw);max-height:90vh;overflow:auto;background:#fff;border:1px solid var(--border);
      border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,.25);
    }
    .modal header{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;border-bottom:1px solid var(--border)}
    .modal h3{margin:0;font-size:18px}
    .modal .body{padding:16px;line-height:1.9}
    .modal footer{padding:12px 16px;border-top:1px solid var(--border);display:flex;justify-content:flex-end;gap:8px}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>ğŸ… ç²çåå–®å¡«å ±èˆ‡æ–‡ä»¶è‡ªå‹•ç”¢å‡ºç³»çµ±</h1>

    <!-- å¾Œç«¯ç‹€æ…‹ Banner -->
    <div id="topWarn" class="banner danger">å¾Œç«¯é€£ç·šå¤±æ•—</div>

    <div class="grid">
      <!-- å·¦ï¼šå¡«å ± -->
      <section class="card">
        <h2>æ–°å¢ç²çåŒå­¸</h2>
        <form id="form">
          <div class="field">
            <label>ç­ç´š</label>
            <input id="classInput" placeholder="ä¾‹å¦‚ï¼š701" />
          </div>
          <div class="field">
            <label>åº§è™Ÿ</label>
            <input id="seatInput" placeholder="ä¾‹å¦‚ï¼š15" />
          </div>
          <div class="field">
            <label>å§“å</label>
            <input id="nameInput" placeholder="ä¾‹å¦‚ï¼šç‹å°æ˜" />
          </div>
          <div class="field">
            <label>ç™¼ç”Ÿæ—¥æœŸ</label>
            <input id="dateInput" type="date" />
          </div>
          <div class="field">
            <label>å¾—çåŸå› ï¼ˆäº‹ç”±ï¼‰</label>
            <textarea id="reasonInput" placeholder="ä¾‹å¦‚ï¼šå…¨åœ‹è‹±èªæœ—è®€æ¯”è³½æ¦®ç²ç¬¬ä¸€å"></textarea>
          </div>
          <div class="field">
            <label>çæ‡²ç¨®é¡</label>
            <select id="rewardSelect">
              <option value="">è«‹é¸æ“‡</option>
              <option>å˜‰çä¸€æ”¯</option>
              <option>å˜‰çäºŒæ”¯</option>
              <option>å°åŠŸä¸€æ”¯</option>
              <option>å°åŠŸäºŒæ”¯</option>
            </select>
          </div>

          <div class="field">
            <button class="btn primary" type="submit">ï¼‹åŠ å…¥åå–®</button>
          </div>
        </form>
      </section>

      <!-- å³ï¼šåˆ—è¡¨ -->
      <section class="card">
        <h2>å·²å¡«å ±åå–®ï¼ˆå…± <span id="count">0</span> ç­†ï¼‰</h2>

        <div class="tools">
          <input id="q" class="grow" placeholder="æœå°‹ï¼šç­ç´š / å§“å / äº‹ç”± / çæ‡²" />
          <button id="refreshBtn" class="btn">é‡æ–°æ•´ç†</button>
        </div>

        <table class="listtable">
          <thead>
            <tr>
              <th style="width:48px"></th>
              <th>ç­ç´š</th>
              <th>åº§è™Ÿ</th>
              <th>å§“å</th>
              <th>äº‹ç”±</th>
              <th>çæ‡²</th>
            </tr>
          </thead>
          <tbody id="tbody">
            <tr><td colspan="6" class="empty">å°šç„¡è³‡æ–™</td></tr>
          </tbody>
        </table>

        <div style="margin-top:12px;display:flex;gap:8px;align-items:center">
          <span class="hint">å‹¾é¸å¤šç­†å¯ä¸€æ¬¡ç”¢å‡º</span>
          <button id="btnEmcee" class="btn" disabled>ä¸€éµç”¢å‡ºå¸å„€ç¨¿</button>
          <button id="btnAward" class="btn primary" disabled>ä¸€éµç”¢å‡ºæ•˜çå–®</button>
        </div>
      </section>
    </div>
  </div>

  <!-- å¸å„€ç¨¿ Modal -->
  <div id="backdrop" class="backdrop" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <header>
        <h3 id="modalTitle">é è¦½</h3>
        <button id="closeModal" class="btn">é—œé–‰</button>
      </header>
      <div id="docBody" class="body"></div>
      <footer>
        <button id="copyBtn" class="btn">è¤‡è£½æ–‡å­—</button>
        <button id="downloadPdfBtn" class="btn primary">åŒ¯å‡º PDFï¼ˆå‰ç«¯ï¼‰</button>
      </footer>
    </div>
  </div>

  <!-- è¨­å®šèˆ‡è…³æœ¬ -->
  <script defer src="./config.js"></script>
  <!-- html2pdfï¼ˆå‰ç«¯ PDFï¼‰ -->
  <script defer src="https://cdn.jsdelivr.net/npm/html2pdf.js@0.10.1/dist/html2pdf.bundle.min.js"></script>
  <script defer src="./app.js"></script>
</body>
</html>
