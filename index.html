<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>ç²çåå–®å¡«å ±èˆ‡æ–‡ä»¶è‡ªå‹•ç”¢å‡ºç³»çµ±</title>
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <style>
    :root{
      --bg:#f5f7fb; --card:#fff; --border:#e6e8ef; --muted:#6b7280; --text:#0f172a;
      --blue:#1e3a8a; --blue-weak:#eef2ff; --btn:#64748b; --btn-disabled:#9aa3af;
      --accent:#3b82f6; --accent-weak:#dbeafe; --danger:#ef4444;
      --radius:14px; --shadow:0 8px 24px rgba(15,23,42,.06);
    }
    *{box-sizing:border-box}
    html,body{margin:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,"Microsoft JhengHei",Segoe UI,Roboto,Helvetica,Arial,sans-serif}
    .wrap{max-width:1160px;margin:24px auto;padding:0 16px}
    .top{background:#fff;border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow);padding:18px 20px;margin-bottom:16px}
    .title{display:flex;gap:10px;align-items:center;font-weight:800;color:var(--blue);font-size:20px;margin:0}
    .subtitle{display:flex;justify-content:space-between;gap:12px;margin-top:8px;color:var(--muted);font-size:13px}
    .subtitle .warn{color:var(--danger)}
    .grid{display:grid;grid-template-columns:1fr;gap:16px}
    @media(min-width:980px){ .grid{grid-template-columns:420px 1fr} }
    .card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden}
    .card h3{margin:0;padding:16px 16px 8px;font-size:18px}
    .card .pad{padding:16px}
    label{display:block;font-size:12px;color:var(--muted);margin:10px 0 6px}
    input,select,textarea{width:100%;padding:10px 12px;border:1px solid var(--border);border-radius:10px;background:#fff}
    textarea{min-height:92px;resize:vertical}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .btn{appearance:none;border:0;border-radius:10px;padding:12px 16px;font-weight:700;cursor:pointer}
    .btn-primary{background:var(--accent);color:#fff}
    .btn:disabled{cursor:not-allowed;opacity:.75}
    .btn-wide{width:100%}
    .hint{font-size:12px;color:var(--muted);margin-top:6px}
    .rightHead{display:flex;justify-content:space-between;align-items:flex-end;padding:16px}
    .count{font-size:14px;color:#334155}
    .count b{font-size:28px;color:#111827;margin:0 6px}
    .status{font-size:12px;color:var(--muted)}
    .actions{display:flex;gap:10px;flex-wrap:wrap;padding:0 16px 12px}
    .btn-gray{background:#e5e7eb;color:#374151}
    .btn-gray:disabled{background:#e5e7eb;color:var(--btn-disabled)}
    .tableWrap{padding:0 16px 16px}
    .tbl{border-collapse:collapse;width:100%;min-width:760px;border:1px solid var(--border);border-radius:12px;overflow:hidden}
    .tbl th,.tbl td{padding:10px 12px;border-bottom:1px solid var(--border);text-align:left;font-size:14px;background:#fff}
    .tbl th{background:var(--blue-weak);font-weight:700}
    .empty{padding:28px 12px;text-align:center;color:var(--muted)}
    .toolRow{display:flex;gap:8px;align-items:center;flex-wrap:wrap;padding:8px 16px}
    .mono{font-family:ui-monospace,Menlo,Consolas,monospace}
    .backdrop{position:fixed;inset:0;background:rgba(0,0,0,.35);display:none;align-items:center;justify-content:center;padding:16px}
    .modal{width:min(880px,96vw);background:#fff;border-radius:16px;border:1px solid var(--border);box-shadow:var(--shadow);overflow:hidden}
    .modal header{display:flex;justify-content:space-between;align-items:center;padding:14px 16px;border-bottom:1px solid var(--border)}
    .modal .body{padding:16px;max-height:70vh;overflow:auto}
    .modal .foot{padding:12px 16px;border-top:1px solid var(--border);display:flex;gap:8px;justify-content:flex-end;flex-wrap:wrap}
  </style>
</head>
<body>
<div class="wrap">
  <div class="top">
    <h2 class="title">ğŸ‘¤ ç²çåå–®å¡«å ±èˆ‡æ–‡ä»¶è‡ªå‹•ç”¢å‡ºç³»çµ±</h2>
    <div class="subtitle">
      <div id="uid">ğŸ‘¤ ä½¿ç”¨è€… IDï¼ˆç”¨æ–¼å…±äº«/è¿½è¹¤ï¼‰ï¼šanonymous</div>
      <div class="warn" id="topWarn">å¾Œç«¯é€£ç·šæª¢æŸ¥ä¸­â€¦</div>
    </div>
  </div>

  <div class="grid">
    <!-- å·¦å´ -->
    <div class="card">
      <h3>æ–°å¢ç²çåŒå­¸</h3>
      <div class="pad">
        <form id="form">
          <label>ç­ç´š</label>
          <input name="ç­ç´š" placeholder="ä¾‹å¦‚ï¼š701" required/>
          <div class="row">
            <div>
              <label>åº§è™Ÿ</label>
              <input name="åº§è™Ÿ" type="number" placeholder="ä¾‹å¦‚ï¼š15"/>
            </div>
            <div>
              <label>å§“å</label>
              <input name="å§“å" placeholder="ä¾‹å¦‚ï¼šç‹å°æ˜" required/>
            </div>
          </div>
          <label>ç™¼ç”Ÿæ—¥æœŸ</label>
          <input name="ç™¼ç”Ÿæ—¥æœŸ" type="date" required/>
          <label>å¾—çåŸå› ï¼ˆäº‹ç”±ï¼‰</label>
          <textarea name="äº‹ç”±" placeholder="ä¾‹å¦‚ï¼šåƒåŠ å…¨åœ‹èªæ–‡ç«¶è³½æ¦®ç²ç‰¹å„ª" required></textarea>
          <label>çæ‡²ç¨®é¡ï¼ˆæ•˜çå…§å®¹ï¼‰</label>
          <select name="çæ‡²ç¨®é¡" id="rewardSelect" required>
            <option value="" disabled selected>è«‹é¸æ“‡</option>
            <option>å˜‰ç</option>
            <option>å°åŠŸ</option>
            <option>å¤§åŠŸ</option>
            <option>è­¦å‘Š</option>
            <option>å°é</option>
            <option>å¤§é</option>
            <option>å…¶ä»–</option>
          </select>
          <label>æ³•æ¢ä¾æ“š</label>
          <input name="æ³•æ¢ä¾æ“š" id="basisInput" placeholder="è‡ªå‹•å¸¶å…¥ï¼Œå¯è¦†å¯«"/>
          <div class="hint">æœªå¡«æ™‚æœƒä¾ã€Œçæ‡²ç¨®é¡ã€è‡ªå‹•å¡«å…¥å¸¸ç”¨æ³•æ¢</div>
          <button type="submit" class="btn btn-primary btn-wide" style="margin-top:14px">åŠ å…¥åå–®</button>
        </form>
      </div>
    </div>

    <!-- å³å´ -->
    <div class="card">
      <div class="rightHead">
        <h3>å·²å¡«å ±åå–®</h3>
        <div class="count">ï¼ˆå…± <b id="count">0</b> ç­†ï¼‰</div>
      </div>

      <div class="toolRow">
        <input id="q" placeholder="æœå°‹ï¼šç­ç´š / å§“å / äº‹ç”± / ç¨®é¡" style="flex:1; padding:8px 12px; border:1px solid var(--border); border-radius:10px; background:#fff"/>
        <button id="refreshBtn" class="btn" style="background:#e5e7eb">é‡æ–°æ•´ç†</button>
        <button id="toggleAllBtn" class="btn" style="background:#e5e7eb">å…¨é¸/å–æ¶ˆ</button>
      </div>

      <div class="pad" style="padding-top:0">
        <div class="status" id="backendStatus">å¾Œç«¯æœªåˆå§‹åŒ–ã€‚</div>
        <div style="margin:10px 0 14px; font-weight:700">æ–‡ä»¶ç”¢å‡º</div>
        <div class="actions">
          <button id="btnEmcee" class="btn btn-gray" disabled>ğŸ™ï¸ ä¸€éµç”¢å‡ºå¸å„€ç¨¿</button>
          <button id="btnAward" class="btn btn-gray" disabled>ğŸ§¾ ä¸€éµç”¢å‡ºæ•˜çå…¬å‘Š</button>
        </div>
      </div>

      <div class="tableWrap">
        <table class="tbl">
          <thead>
            <tr>
              <th style="width:42px">é¸</th>
              <th>ç·¨è™Ÿ</th><th>ç­ç´š</th><th>åº§è™Ÿ</th><th>å§“å</th>
              <th>æ—¥æœŸ</th><th>äº‹ç”±</th><th>çæ‡²ç¨®é¡</th><th>æ³•æ¢ä¾æ“š</th><th>å»ºç«‹æ™‚é–“</th>
            </tr>
          </thead>
          <tbody id="tbody">
            <tr><td colspan="10" class="empty">å°šç„¡è³‡æ–™</td></tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<!-- Modal -->
<div id="backdrop" class="backdrop">
  <div class="modal">
    <header>
      <div id="modalTitle" style="font-weight:800">è¼¸å‡º</div>
      <button id="closeModal" class="btn" style="background:#e5e7eb">é—œé–‰</button>
    </header>
    <div id="docBody" class="body"></div>
    <div class="foot">
      <button id="copyBtn" class="btn" style="background:#e5e7eb;display:none">è¤‡è£½æ–‡å­—</button>
      <button id="openDocBtn" class="btn" style="background:#e5e7eb;display:none">é–‹å•Ÿé›²ç«¯è©¦ç®—è¡¨</button>
      <button id="openPdfBtn" class="btn btn-primary" style="display:none">é–‹å•Ÿ PDF</button>
      <button id="downloadPdfBtn" class="btn btn-primary" style="display:none">è½‰æˆ PDF</button>
    </div>
  </div>
</div>

<script defer src="https://cdn.jsdelivr.net/npm/html2pdf.js@0.10.1/dist/html2pdf.bundle.min.js"></script>
<script defer src="./config.js"></script>
<script defer src="./app.js"></script>
</body>
</html>
